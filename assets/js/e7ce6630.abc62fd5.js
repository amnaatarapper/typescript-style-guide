"use strict";(self.webpackChunktypescript_style_guide_website=self.webpackChunktypescript_style_guide_website||[]).push([[668],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=p(n),m=i,h=u["".concat(l,".").concat(m)]||u[m]||d[m]||r;return n?a.createElement(h,s(s({ref:t},c),{},{components:n})):a.createElement(h,s({ref:t},c))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,s=new Array(r);s[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[u]="string"==typeof e?e:i,s[1]=o;for(var p=2;p<r;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3743:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(7462),i=n(7294),r=n(6668);function s(e){const t=e.map((e=>({...e,parentIndex:-1,children:[]}))),n=Array(7).fill(-1);t.forEach(((e,t)=>{const a=n.slice(2,e.level);e.parentIndex=Math.max(...a),n[e.level]=t}));const a=[];return t.forEach((e=>{const{parentIndex:n,...i}=e;n>=0?t[n].children.push(i):a.push(i)})),a}function o(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:a}=e;return t.flatMap((e=>{const t=o({toc:e.children,minHeadingLevel:n,maxHeadingLevel:a});return function(e){return e.level>=n&&e.level<=a}(e)?[{...e,children:t}]:t}))}function l(e){const t=e.getBoundingClientRect();return t.top===t.bottom?l(e.parentNode):t}function p(e,t){let{anchorTopOffset:n}=t;const a=e.find((e=>l(e).top>=n));if(a){return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(l(a))?a:e[e.indexOf(a)-1]??null}return e[e.length-1]??null}function c(){const e=(0,i.useRef)(0),{navbar:{hideOnScroll:t}}=(0,r.L)();return(0,i.useEffect)((()=>{e.current=t?0:document.querySelector(".navbar").clientHeight}),[t]),e}function u(e){const t=(0,i.useRef)(void 0),n=c();(0,i.useEffect)((()=>{if(!e)return()=>{};const{linkClassName:a,linkActiveClassName:i,minHeadingLevel:r,maxHeadingLevel:s}=e;function o(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(a),o=function(e){let{minHeadingLevel:t,maxHeadingLevel:n}=e;const a=[];for(let i=t;i<=n;i+=1)a.push(`h${i}.anchor`);return Array.from(document.querySelectorAll(a.join()))}({minHeadingLevel:r,maxHeadingLevel:s}),l=p(o,{anchorTopOffset:n.current}),c=e.find((e=>l&&l.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e)));e.forEach((e=>{!function(e,n){n?(t.current&&t.current!==e&&t.current.classList.remove(i),e.classList.add(i),t.current=e):e.classList.remove(i)}(e,e===c)}))}return document.addEventListener("scroll",o),document.addEventListener("resize",o),o(),()=>{document.removeEventListener("scroll",o),document.removeEventListener("resize",o)}}),[e,n])}function d(e){let{toc:t,className:n,linkClassName:a,isChild:r}=e;return t.length?i.createElement("ul",{className:r?void 0:n},t.map((e=>i.createElement("li",{key:e.id},i.createElement("a",{href:`#${e.id}`,className:a??void 0,dangerouslySetInnerHTML:{__html:e.value}}),i.createElement(d,{isChild:!0,toc:e.children,className:n,linkClassName:a}))))):null}const m=i.memo(d);function h(e){let{toc:t,className:n="table-of-contents table-of-contents__left-border",linkClassName:l="table-of-contents__link",linkActiveClassName:p,minHeadingLevel:c,maxHeadingLevel:d,...h}=e;const k=(0,r.L)(),g=c??k.tableOfContents.minHeadingLevel,f=d??k.tableOfContents.maxHeadingLevel,y=function(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:a}=e;return(0,i.useMemo)((()=>o({toc:s(t),minHeadingLevel:n,maxHeadingLevel:a})),[t,n,a])}({toc:t,minHeadingLevel:g,maxHeadingLevel:f});return u((0,i.useMemo)((()=>{if(l&&p)return{linkClassName:l,linkActiveClassName:p,minHeadingLevel:g,maxHeadingLevel:f}}),[l,p,g,f])),i.createElement(m,(0,a.Z)({toc:y,className:n,linkClassName:l},h))}},8252:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>c,default:()=>k,frontMatter:()=>p,metadata:()=>u,toc:()=>d});var a=n(7462),i=n(7294),r=n(3905),s=n(3743);const o={tableOfContentsInline:"tableOfContentsInline_prmo"};function l(e){let{toc:t,minHeadingLevel:n,maxHeadingLevel:a}=e;return i.createElement("div",{className:o.tableOfContentsInline},i.createElement(s.Z,{toc:t,minHeadingLevel:n,maxHeadingLevel:a,className:"table-of-contents",linkClassName:null}))}const p={description:"TypeScript Style Guide provides a concise set of conventions (sometimes arbitrary) and best practices used to create consistent, maintainable code.",toc_min_heading_level:2,toc_max_heading_level:3},c=void 0,u={type:"mdx",permalink:"/typescript-style-guide/",source:"@site/src/pages/index.mdx",description:"TypeScript Style Guide provides a concise set of conventions (sometimes arbitrary) and best practices used to create consistent, maintainable code.",frontMatter:{description:"TypeScript Style Guide provides a concise set of conventions (sometimes arbitrary) and best practices used to create consistent, maintainable code.",toc_min_heading_level:2,toc_max_heading_level:3}},d=[{value:"Introduction",id:"introduction",level:2},{value:"Table of Contents",id:"table-of-contents",level:2},{value:"About Guide",id:"about-guide",level:2},{value:"TLDR",id:"tldr",level:2},{value:"Data Immutability",id:"data-immutability",level:2},{value:"Functions",id:"functions",level:2},{value:"Variables",id:"variables",level:2},{value:"Const Assertion",id:"const-assertion",level:3},{value:"Enums &amp; Const Assertion",id:"enums--const-assertion",level:3},{value:"Null &amp; Undefined",id:"null--undefined",level:3},{value:"Types",id:"types",level:2},{value:"Type Definition",id:"type-definition",level:3},{value:"Array Types",id:"array-types",level:3},{value:"Type Annotation &amp; Inference",id:"type-annotation--inference",level:3},{value:"Return Types",id:"return-types",level:3},{value:"Type Error",id:"type-error",level:3},{value:"Type &amp; Non-nullability Assertions",id:"type--non-nullability-assertions",level:3},{value:"any",id:"any",level:3},{value:"Naming",id:"naming",level:2},{value:"Named Export",id:"named-export",level:3},{value:"Naming Conventions",id:"naming-conventions",level:3},{value:"Variables",id:"variables-1",level:4},{value:"Functions",id:"functions-1",level:4},{value:"Generics",id:"generics",level:4},{value:"React Components",id:"react-components",level:4},{value:"Prop Types",id:"prop-types",level:4},{value:"Callback Props",id:"callback-props",level:4},{value:"React Hooks",id:"react-hooks",level:4},{value:"Comments",id:"comments",level:3},{value:"React Components",id:"react-components-1",level:2},{value:"Props Type",id:"props-type",level:3},{value:"Required &amp; Optional Props",id:"required--optional-props",level:3},{value:"Component Types",id:"component-types",level:3},{value:"Container",id:"container",level:4},{value:"UI - Feature",id:"ui---feature",level:4},{value:"UI - Design system",id:"ui---design-system",level:4},{value:"Store &amp; Pass Data",id:"store--pass-data",level:3},{value:"Source Organization",id:"source-organization",level:2},{value:"Code Collocation",id:"code-collocation",level:3},{value:"Imports",id:"imports",level:3},{value:"Project Structure",id:"project-structure",level:3},{value:"Tests - Unit &amp; Integration",id:"tests---unit--integration",level:2},{value:"What &amp; How To Test",id:"what--how-to-test",level:3},{value:"Test Description",id:"test-description",level:3},{value:"Tooling Extension",id:"tooling-extension",level:3},{value:"Snapshot",id:"snapshot",level:3}],m={toc:d},h="wrapper";function k(e){let{components:t,...n}=e;return(0,r.kt)(h,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{align:"center"},(0,r.kt)("img",{src:"https://raw.githubusercontent.com/mkosir/typescript-style-guide/main/misc/typescript-logo-30.png"})," ","TypeScript Style Guide"),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"TypeScript Style Guide provides a concise set of conventions (sometimes arbitrary) and best practices used to create consistent, maintainable code."),(0,r.kt)("h2",{id:"table-of-contents"},"Table of Contents"),(0,r.kt)(l,{toc:d,minHeadingLevel:2,maxHeadingLevel:3,mdxType:"TOCInline"}),(0,r.kt)("h2",{id:"about-guide"},"About Guide"),(0,r.kt)("p",null,"As any code style guide is opinionated, this is no different as it tries to set conventions that govern our code."),(0,r.kt)("p",null,'Since "consistency is the key", style guide strives to enforce majority of the rules by using automated tooling as ESLint, TypeScript, Prettier, etc. Still certain design and architectural decisions must be followed which are described with conventions bellow.'),(0,r.kt)("p",null,"Style Guide requires you to use:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/microsoft/TypeScript"},"TypeScript v5")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/typescript-eslint/typescript-eslint"},"typescript-eslint v6")," with ",(0,r.kt)("a",{parentName:"li",href:"https://typescript-eslint.io/linting/configs/#strict-type-checked"},(0,r.kt)("inlineCode",{parentName:"a"},"strict-type-checked")),",\n",(0,r.kt)("a",{parentName:"li",href:"https://typescript-eslint.io/linting/configs/#stylistic-type-checked"},(0,r.kt)("inlineCode",{parentName:"a"},"stylistic-type-checked"))," configurations enabled.")),(0,r.kt)("p",null,"Style Guide assumes using, but is not limited to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/facebook/react"},"React")," as UI library for frontend conventions."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://jestjs.io/"},"Jest")," and ",(0,r.kt)("a",{parentName:"li",href:"https://testing-library.com/"},"Testing Library")," for testing conventions.")),(0,r.kt)("h2",{id:"tldr"},"TLDR"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Code is organized and grouped by feature.")," Collocate code as close as possible to where it's relevant. ",(0,r.kt)("a",{parentName:"li",href:"#code-collocation"},"\u2b63")),(0,r.kt)("li",{parentName:"ul"},"Strive for data immutability. ",(0,r.kt)("a",{parentName:"li",href:"#data-immutability"},"\u2b63")),(0,r.kt)("li",{parentName:"ul"},"Strive for functions to be pure, stateless and have single responsibility. ",(0,r.kt)("a",{parentName:"li",href:"#functions"},"\u2b63")),(0,r.kt)("li",{parentName:"ul"},"Majority of function arguments should be required (use optional sparingly). ",(0,r.kt)("a",{parentName:"li",href:"#required--optional-props"},"\u2b63")),(0,r.kt)("li",{parentName:"ul"},"Embrace const assertions. ",(0,r.kt)("a",{parentName:"li",href:"#const-assertion"},"\u2b63")),(0,r.kt)("li",{parentName:"ul"},"Strong emphasis to keep naming conventions consistent and readable. ",(0,r.kt)("a",{parentName:"li",href:"#naming-conventions"},"\u2b63")),(0,r.kt)("li",{parentName:"ul"},"Use named exports. ",(0,r.kt)("a",{parentName:"li",href:"#named-export"},"\u2b63")),(0,r.kt)("li",{parentName:"ul"},"Use of server-state library is encouraged (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/tanstack/query"},"react-query"),", ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/apollographql/apollo-client"},"apollo client"),"...). ",(0,r.kt)("a",{parentName:"li",href:"#store--pass-data"},"\u2b63")),(0,r.kt)("li",{parentName:"ul"},"Use of client-state library for global state is discouraged. ",(0,r.kt)("a",{parentName:"li",href:"#store--pass-data"},"\u2b63")),(0,r.kt)("li",{parentName:"ul"},"UI components must only show derived state and send events, nothing more (no business logic). ",(0,r.kt)("a",{parentName:"li",href:"#component-types"},"\u2b63")),(0,r.kt)("li",{parentName:"ul"},"Test business logic, not implementation details. ",(0,r.kt)("a",{parentName:"li",href:"#what--how-to-test"},"\u2b63"))),(0,r.kt)("h2",{id:"data-immutability"},"Data Immutability"),(0,r.kt)("p",null,"Majority of the data should be immutable (use ",(0,r.kt)("inlineCode",{parentName:"p"},"Readonly"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"ReadonlyArray"),", always return new array, object etc). To keep cognitive load low for future developers try to keep data objects small.",(0,r.kt)("br",{parentName:"p"}),"\n","As an exception mutations should be used sparingly in cases where truly necessary: complex objects, performance reasoning etc."),(0,r.kt)("h2",{id:"functions"},"Functions"),(0,r.kt)("p",null,"Function conventions should be followed as much as possible (some of the derives from functional programming basic concepts):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Function should have single responsibility.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Function should be stateless where the same input arguments return same value every single time.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Function should accept at least one argument and return data.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Function should not have side effects, but be pure. It's implementation should not modify or access variable value outside its local environment (global state, fetching etc.).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"To keep function readable and easily extensible for the future (adding/removing args), strive to have single object as the function arg, instead of multiple args.",(0,r.kt)("br",{parentName:"p"}),"\n","As exception this not applies when having only one primitive single arg (e.g. simple functions isNumber(value), implementing currying etc.)."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'// \u274c Avoid having multiple arguments\ntransformUserInput("client", false, 60, 120, null, true, 2000);\n\n// \u2705 Use options object as argument\ntransformUserInput({\n  method: "client",\n  isValidated: false,\n  minLines: 60,\n  maxLines: 120,\n  defaultInput: null,\n  shouldLog: true,\n  timeout: 2000,\n});\n'))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Strive to have majority of args required and use optional sparingly.",(0,r.kt)("br",{parentName:"p"}),"\n","If function becomes to complex it probably should be broken into smaller pieces.",(0,r.kt)("br",{parentName:"p"}),"\n",'An exaggerated example where implementing 10 functions with 5 required args each, is better then implementing one "can do it all" function that accepts 50 optional args.')),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"When applicable use ",(0,r.kt)("strong",{parentName:"p"},"discriminated union type")," to eliminate optional args, which will decrease complexity on function API and only necessary/required args will be passed depending on its use case."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"// \u274c Avoid optional args as they increase complexity of function API\ntype StatusParams = {\n  data?: Products;\n  title?: string;\n  time?: number;\n  error?: string;\n};\n\n// \u2705 Strive to have majority of args required, if that's not possible,\n// use discriminated union for clear intent on function usage\ntype StatusParamsSuccess = {\n  status: 'success';\n  data: Products;\n  title: string;\n};\n\ntype StatusParamsLoading = {\n  status: 'loading';\n  time: number;\n};\n\ntype StatusParamsError = {\n  status: 'error';\n  error: string;\n};\n\ntype StatusParams = StatusSuccess | StatusLoading | StatusError;\n\nexport const parseStatus = (params: StatusParams) => {...\n")))),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Potential exceptions of react components and hooks"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'// No input arguments.\nconst Logo = () => {\n  return (\n    <svg width="100" height="100">\n      <circle cx="50" cy="50" r="40"></circle>\n      <text x="50%" y="50%">\n        Icon\n      </text>\n    </svg>\n  );\n};\n\n// Parent React component with side effects.\nconst ProductsPage = () => {\n  const { data: products } = useFetchProducts();\n\n  return (\n    <div>\n      {products.map((product) => (\n        <ProductItem name={product.name} />\n      ))}\n    </div>\n  );\n};\n\n// React hook with side effects.\nconst useGetUsers: UseGeUsers = ({ country, isActive }) =>\n  useQuery(["fetchUsers", { country, isActive }], () =>\n    fetchUsers({ country, isActive })\n  );\n'))),(0,r.kt)("h2",{id:"variables"},"Variables"),(0,r.kt)("h3",{id:"const-assertion"},"Const Assertion"),(0,r.kt)("p",null,"Strive to use const assertion (",(0,r.kt)("inlineCode",{parentName:"p"},"as const"),"):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"type is narrowed")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"object gets ",(0,r.kt)("inlineCode",{parentName:"p"},"readonly")," properties")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"array becomes ",(0,r.kt)("inlineCode",{parentName:"p"},"readonly")," tuple"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"// \u274c Avoid declaring constants without const assertion\nconst BASE_LOCATION = { x: 50, y: 130 }; // Type { x: number; y: number; }\nBASE_LOCATION.x = 10;\nconst BASE_LOCATION = [50, 130]; // Type number[]\nBASE_LOCATION.push(10);\n\n// \u2705 Use const assertion\nconst BASE_LOCATION = { x: 50, y: 130 } as const; // Type '{ readonly x: 50; readonly y: 130; }'\nconst BASE_LOCATION = [50, 130] as const; // Type 'readonly [10, 20]'\n")))),(0,r.kt)("h3",{id:"enums--const-assertion"},"Enums & Const Assertion"),(0,r.kt)("p",null,"As enums and const assertions comes with some functional differences - ",(0,r.kt)("a",{parentName:"p",href:"https://www.typescriptlang.org/docs/handbook/enums.html#const-enum-pitfalls"},"const-enum-pitfalls"),", ",(0,r.kt)("a",{parentName:"p",href:"https://www.typescriptlang.org/docs/handbook/enums.html#objects-vs-enums"},"objects vs enums"),", ",(0,r.kt)("a",{parentName:"p",href:"https://www.typescriptlang.org/docs/handbook/enums.html#reverse-mappings"},"reverse-mappings")," etc., we try to limit syntax difference and pick one for consistency."),(0,r.kt)("p",null,"Const assertion must be used over enum."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'// \u274c Avoid using enums\nenum UserRole {\n  GUEST,\n  MODERATOR,\n  ADMINISTRATOR,\n}\n\nenum Color {\n  PRIMARY = "#B33930",\n  SECONDARY = "#113A5C",\n  BRAND = "#9C0E7D",\n}\n\n// \u2705 Use const assertion\nconst USER_ROLES = ["guest", "moderator", "administrator"] as const;\ntype UserRole = (typeof USER_ROLES)[number]; // Type "guest" | "moderator" | "administrator"\n\n// Use satisfies keyword, if UserRole type is already defined - e.g. database schema model\ntype UserRoleDB = ReadonlyArray<"guest" | "moderator" | "administrator">;\nconst USER_ROLES_IN_DROPDOWN = [\n  "guest",\n  "moderator",\n  "administrator",\n] as const satisfies UserRoleDB;\n\nconst COLOR = {\n  primary: "#B33930",\n  secondary: "#113A5C",\n  brand: "#9C0E7D",\n} as const;\ntype Color = typeof COLOR;\ntype ColorKey = keyof Color; // Type "PRIMARY" | "SECONDARY" | "BRAND"\ntype ColorValue = Color[ColorKey]; // Type "#B33930" | "#113A5C" | "#9C0E7D"\n')),(0,r.kt)("h3",{id:"null--undefined"},"Null & Undefined"),(0,r.kt)("p",null,"Prefer using ",(0,r.kt)("inlineCode",{parentName:"p"},"null")," instead of ",(0,r.kt)("inlineCode",{parentName:"p"},"undefined"),", to explicitly state it has no value - assignment, return type etc.",(0,r.kt)("br",{parentName:"p"}),"\n","Use ",(0,r.kt)("inlineCode",{parentName:"p"},"undefined")," assignment when e.g. trying to exclude fields in: forms, request payload, querying database (",(0,r.kt)("a",{parentName:"p",href:"https://www.prisma.io/docs/concepts/components/prisma-client/null-and-undefined"},"Prisma differentiation"),") etc."),(0,r.kt)("h2",{id:"types"},"Types"),(0,r.kt)("h3",{id:"type-definition"},"Type Definition"),(0,r.kt)("p",null,"TypeScript offers two options for type definitions - ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"interface"),". As they come with some functional differences, we try to limit syntax difference and pick one for consistency."),(0,r.kt)("p",null,"All types must be defined with ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," alias (",(0,r.kt)("a",{parentName:"p",href:"https://typescript-eslint.io/rules/consistent-type-definitions/#type"},"eslint rule"),")."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"// \u274c Avoid interface definitions\ninterface UserInfo {\n  name: string;\n}\n\n// \u2705 Use type definition\ntype UserInfo = {\n  name: string;\n};\n")),(0,r.kt)("p",null,"In case of exceptions use ",(0,r.kt)("inlineCode",{parentName:"p"},"interface")," and disable lint rule. E.g. declaration merging, extending third-party library types etc."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"declare namespace NodeJS {\n// eslint-disable-next-line @typescript-eslint/consistent-type-definitions\nexport interface ProcessEnv {\n    NODE_ENV: 'development' | 'production;\n    PORT: string;\n  }\n}\n\n")),(0,r.kt)("h3",{id:"array-types"},"Array Types"),(0,r.kt)("p",null,"Array types must be defined with ",(0,r.kt)("inlineCode",{parentName:"p"},"generic")," syntax (",(0,r.kt)("a",{parentName:"p",href:"https://typescript-eslint.io/rules/array-type/#generic"},"eslint rule"),")."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'// \u274c Avoid\nconst x: string[] = ["a", "b"];\nconst y: readonly string[] = ["a", "b"];\n\n// \u2705 Use\nconst x: Array<string> = ["a", "b"];\nconst y: ReadonlyArray<string> = ["a", "b"];\n')),(0,r.kt)("h3",{id:"type-annotation--inference"},"Type Annotation & Inference"),(0,r.kt)("p",null,"Just because you don't need to add types, doesn't mean you shouldn't. Explicit type annotations increase code readability and intent, but still in some cases inference has its place."),(0,r.kt)("p",null,'It should be taken with a grain of salt, but use type inference "when possible" and annotate types "when you must".'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'// \u274c Avoid annotating types, when they can be inferred\nconst color: string = "blue";\nconst [name, setName] = useState<string>("");\nconst [isActive, setIsActive] = useState<boolean>(false);\n\n// \u2705 Use type inference or annotate explicit types when you must\nconst COLOR = "blue"; // Type \'blue\'\nconst [name, setName] = useState(""); // Type \'string\'\nconst [isActive, setIsActive] = useState(false); // Type \'boolean\'\n\ntype UserRole = "admin" | "guest";\nconst [userRole, setUserRole] = useState<UserRole>("admin"); // Type \'UserRole\'\nconst [users, setUsers] = useState<ReadonlyArray<User>>([]); // Type \'readonly User[]\'\n')),(0,r.kt)("h3",{id:"return-types"},"Return Types"),(0,r.kt)("p",null,"Including return type annotations is highly encouraged, altought not required (",(0,r.kt)("a",{parentName:"p",href:"https://typescript-eslint.io/rules/explicit-function-return-type/"},"eslint rule"),")."),(0,r.kt)("p",null,"Consider benefits when explicitly typing the return value of a function:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Return values makes it clear and easy to understand to any calling code what type is returned."),(0,r.kt)("li",{parentName:"ul"},"In the case where there is no return value, the calling code doesn't try to use the undefined value when it shouldn't."),(0,r.kt)("li",{parentName:"ul"},"Surface potential type errors faster in the future if there are code changes that change the return type of the function."),(0,r.kt)("li",{parentName:"ul"},"Easier to refactor, since it ensures that the return value is assigned to a variable of the correct type."),(0,r.kt)("li",{parentName:"ul"},"Similar to writing tests before implementation (TDD), defining function arguments and return type, gives you the opportunity to discuss the feature functionality and its interface ahead of implementation."),(0,r.kt)("li",{parentName:"ul"},"Although type inference is very convenient, adding return types can save TypeScript compiler a lot of work.")),(0,r.kt)("h3",{id:"type-error"},"Type Error"),(0,r.kt)("p",null,"If TypeScript error can't be mitigated, as last resort use ",(0,r.kt)("inlineCode",{parentName:"p"},"@ts-expect-error")," to suppress it (",(0,r.kt)("a",{parentName:"p",href:"https://typescript-eslint.io/rules/prefer-ts-expect-error/"},"eslint rule"),"). If at any future point suppressed line becomes error-free, TypeScript compiler will indicate it.",(0,r.kt)("br",{parentName:"p"}),"\n","",(0,r.kt)("inlineCode",{parentName:"p"},"@ts-ignore")," is not allowed, while ",(0,r.kt)("inlineCode",{parentName:"p"},"@ts-expect-error")," can be used with provided description (",(0,r.kt)("a",{parentName:"p",href:"https://typescript-eslint.io/rules/ban-ts-comment/#allow-with-description"},"eslint rule"),")."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'// \u274c Avoid @ts-ignore\n// @ts-ignore\nconst result = doSomething("hello");\n\n// \u2705 Use @ts-expect-error with description\n// @ts-expect-error: the library definition is wrong\nconst result = doSomething("hello");\n')),(0,r.kt)("h3",{id:"type--non-nullability-assertions"},"Type & Non-nullability Assertions"),(0,r.kt)("p",null,"Type assertions ",(0,r.kt)("inlineCode",{parentName:"p"},"brand as BrandType")," and non-nullability assertions ",(0,r.kt)("inlineCode",{parentName:"p"},"brand!.name")," are unsafe. Both only silence TypeScript compiler and increase the risk of crashing application at runtime.",(0,r.kt)("br",{parentName:"p"}),"\n","They can only be used as last resort exceptions (e.g. third party library types mismatch etc.) with strong rational why being introduced into codebase."),(0,r.kt)("h3",{id:"any"},"any"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"any")," data type must not be used as it represents literally \u201cany\u201d value that TypeScript defaults to and skips type checking since it cannot infer the type. As such, any is dangerous, it can mask severe programming errors.",(0,r.kt)("br",{parentName:"p"}),"\n","If error truly cannot be resolved as safer option use type ",(0,r.kt)("inlineCode",{parentName:"p"},"unknown")," since it does not allow dereferencing all properties or as last resort use ",(0,r.kt)("inlineCode",{parentName:"p"},"@ts-expect-error")," (",(0,r.kt)("a",{parentName:"p",href:"#type-error"},"Type Error"),")."),(0,r.kt)("h2",{id:"naming"},"Naming"),(0,r.kt)("p",null,"Setting aside convention on cache invalidation, but for the second hardest thing, clear naming with important context should be provided."),(0,r.kt)("p",null,"Strive to keep naming conventions consistent and readable, because another person will maintain the code you have written."),(0,r.kt)("h3",{id:"named-export"},"Named Export"),(0,r.kt)("p",null,"Named exports must be used to ensure that all imports follow a uniform pattern (",(0,r.kt)("a",{parentName:"p",href:"https://github.com/import-js/eslint-plugin-import/blob/main/docs/rules/no-default-export.md"},"eslint rule"),").",(0,r.kt)("br",{parentName:"p"}),"\n","This keeps variables, functions... names consistent across the entire codebase.",(0,r.kt)("br",{parentName:"p"}),"\n","Named exports have the benefit of erroring when import statements try to import something that hasn't been declared."),(0,r.kt)("p",null,"In case of exceptions e.g. Next.js pages, disable rule:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'// .eslintrc\n...\noverrides: [\n  {\n    files: ["src/pages/**/*"],\n    rules: { "import/no-default-export": "off" },\n  },\n],\n')),(0,r.kt)("h3",{id:"naming-conventions"},"Naming Conventions"),(0,r.kt)("p",null,"While it's often hard to find the best names, try optimize code for consistency and future reader by following rules:"),(0,r.kt)("h4",{id:"variables-1"},"Variables"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"locals"},"Locals"),(0,r.kt)("p",{parentName:"li"},"Camel case",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"products"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"productsFiltered"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"booleans"},"Booleans"),(0,r.kt)("p",{parentName:"li"},"Prefixed with ",(0,r.kt)("inlineCode",{parentName:"p"},"is"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"has")," etc.",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"isDisabled"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"hasProduct"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"constants"},"Constants"),(0,r.kt)("p",{parentName:"li"},"Capitalized",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"PRODUCT_ID"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("h4",{parentName:"li",id:"object-constants"},"Object constants"),(0,r.kt)("p",{parentName:"li"},"Singular, capitalized with const assertion and optionally satisfies type (if there is one)."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'const ORDER_STATUS = {\n  pending: "pending",\n  fulfilled: "fulfilled",\n  error: "error",\n} as const satisfies OrderStatus;\n')))),(0,r.kt)("h4",{id:"functions-1"},"Functions"),(0,r.kt)("p",null,"Camel case",(0,r.kt)("br",{parentName:"p"}),"\n",(0,r.kt)("inlineCode",{parentName:"p"},"filterProductsByType"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"formatCurrency")),(0,r.kt)("h4",{id:"generics"},"Generics"),(0,r.kt)("p",null,"A name starts with the capital letter T ",(0,r.kt)("inlineCode",{parentName:"p"},"TRequest"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"TFooBar")," (similar as ",(0,r.kt)("a",{parentName:"p",href:"https://google.github.io/styleguide/javaguide.html#s5.2.8-type-variable-names"},"Google style guide")," or ",(0,r.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2?view=net-5.0"},".Net internal")," implementation).",(0,r.kt)("br",{parentName:"p"}),"\n","Avoid (popular convention) naming generics with one character ",(0,r.kt)("inlineCode",{parentName:"p"},"T"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"K")," etc., the more variables we introduce, the easier it is to mistake them."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'// \u274c Avoid naming generics with one character\nconst createPair = <T, K extends string>(first: T, second: K): [T, K] => {\n  return [first, second];\n};\nconst pair = createPair(1, "a");\n\n// \u2705 Name starts with the capital letter T\nconst createPair = <TFirst, TSecond extends string>(\n  first: TFirst,\n  second: TSecond\n): [TFirst, TSecond] => {\n  return [first, second];\n};\nconst pair = createPair(1, "a");\n')),(0,r.kt)("h4",{id:"react-components"},"React Components"),(0,r.kt)("p",null,"Pascal case",(0,r.kt)("br",{parentName:"p"}),"\n","",(0,r.kt)("inlineCode",{parentName:"p"},"ProductItem"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"ProductsPage")),(0,r.kt)("h4",{id:"prop-types"},"Prop Types"),(0,r.kt)("p",null,'React component name following "Props" postfix',(0,r.kt)("br",{parentName:"p"}),"\n","",(0,r.kt)("inlineCode",{parentName:"p"},"[ComponentName]Props")," - ",(0,r.kt)("inlineCode",{parentName:"p"},"ProductItemProps"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"ProductsPageProps")),(0,r.kt)("h4",{id:"callback-props"},"Callback Props"),(0,r.kt)("p",null,"Event handler (callback) props are prefixed as ",(0,r.kt)("inlineCode",{parentName:"p"},"on*")," - e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"onClick"),".",(0,r.kt)("br",{parentName:"p"}),"\n","Event handler implementation functions are prefixed as ",(0,r.kt)("inlineCode",{parentName:"p"},"handle*")," - e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"handleClick")," (",(0,r.kt)("a",{parentName:"p",href:"https://github.com/jsx-eslint/eslint-plugin-react/blob/master/docs/rules/jsx-handler-names.md"},"eslint rule"),")."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"// \u274c Avoid inconsistent callback prop naming\n<Button click={actionClick} />\n<MyComponent userSelectedOccurred={triggerUser} />\n\n// \u2705 Use prop prefix 'on*' and handler prefix 'handle*'\n<Button onClick={handleClick} />\n<MyComponent onUserSelected={handleUserSelected} />\n")),(0,r.kt)("h4",{id:"react-hooks"},"React Hooks"),(0,r.kt)("p",null,"Camel case, prefixed as 'use' (",(0,r.kt)("a",{parentName:"p",href:"https://github.com/facebook/react/tree/main/packages/eslint-plugin-react-hooks"},"eslint rule"),"), symmetrically convention as ",(0,r.kt)("inlineCode",{parentName:"p"},"[value, setValue] = useState()")," (",(0,r.kt)("a",{parentName:"p",href:"https://github.com/jsx-eslint/eslint-plugin-react/blob/master/docs/rules/hook-use-state.md#rule-details"},"eslint rule"),")"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"// \u274c Avoid inconsistent useState hook naming\nconst [userName, setUser] = useState();\nconst [color, updateColor] = useState();\nconst [visible, setVisible] = useState();\n\n// \u2705 Use\nconst [name, setName] = useState();\nconst [color, setColor] = useState();\nconst [isActive, setIsActive] = useState();\n")),(0,r.kt)("p",null,"Custom hook must always return an object:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"// \u274c Avoid\nconst [products, errors] = useGetProducts();\nconst [fontSizes] = useTheme();\n\n// \u2705 Use\nconst { products, errors } = useGetProducts();\nconst { fontSizes } = useTheme();\n")),(0,r.kt)("h3",{id:"comments"},"Comments"),(0,r.kt)("p",null,"Comments in general should be avoided. Try to write expressive code and name things what they are before adding comments."),(0,r.kt)("p",null,"As an exception use comments only when you need to add context or explain choices that cannot be expressed through code.",(0,r.kt)("br",{parentName:"p"}),"\n","Comments should always be complete sentences. As rule of a thumb try to explain ",(0,r.kt)("inlineCode",{parentName:"p"},"why")," in comments, not ",(0,r.kt)("inlineCode",{parentName:"p"},"how")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"what"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"// \u274c Avoid\n// convert to minutes\nconst m = s * 60;\n// avg users per minute\nconst myAvg = u / m;\n\n// \u2705 Use\nconst SECONDS_IN_MINUTE = 60;\nconst minutes = seconds * SECONDS_IN_MINUTE;\nconst averageUsersPerMinute = noOfUsers / minutes;\n\n// TODO: Filtering should be moved to the backend once API changes are released.\n// Issue/PR - https://github.com/foo/repo/pulls/55124\nconst filteredUsers = frontendFiltering(selectedUsernames);\n\n// Use Fourier transformation to minimize information loss - https://github.com/dntj/jsfft#usage\nconst frequencies = signal.FFT();\n")),(0,r.kt)("h2",{id:"react-components-1"},"React Components"),(0,r.kt)("p",null,"Since React components and hooks are also functions, ",(0,r.kt)("a",{parentName:"p",href:"#functions"},"respective function conventions")," applies."),(0,r.kt)("h3",{id:"props-type"},"Props Type"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"// \u274c Avoid using React.FC type\ntype FooProps = {\n  name: string;\n  score: number;\n};\n\nexport const Foo: React.FC<FooProps> = ({ name, score }) => {\n\n// \u2705 Use props argument with type\ntype FooProps = Readonly<{\n  name: string;\n  score: number;\n}>;\n\nexport const Foo = ({ name, score }: FooProps) => {...\n")),(0,r.kt)("h3",{id:"required--optional-props"},"Required & Optional Props"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Strive to have majority of props required and use optional sparingly.")),(0,r.kt)("p",null,"Especially when creating new component for first/single use case majority of props should be required. When component starts covering more use cases, introduce optional props.",(0,r.kt)("br",{parentName:"p"}),"\n","There are potential exceptions, where component API needs to implement optional props from the start (e.g. shared components covering multiple use cases, UI design system components - button ",(0,r.kt)("inlineCode",{parentName:"p"},"isDisabled")," etc.)"),(0,r.kt)("p",null,'As mentioned in function example - implementing 10 React components with 5 required props each, is better then implementing one "can do it all" function that accepts 50 optional props.',(0,r.kt)("br",{parentName:"p"}),"\n","If component becomes to complex it probably should be broken into smaller pieces."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Use Discriminated Type")),(0,r.kt)("p",null,"When applicable use ",(0,r.kt)("strong",{parentName:"p"},"discriminated type")," to eliminate optional props, which will decrease complexity on component API and only necessary/required props will be passed depending on its use case."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"// \u274c Avoid optional props as they increase complexity of component API\ntype StatusProps = {\n  data?: Products;\n  title?: string;\n  time?: number;\n  error?: string;\n};\n\n// \u2705 Strive to have majority of props required, if that's not possible,\n// use discriminated union for clear intent on component usage\ntype StatusSuccess = {\n  status: 'success';\n  data: Products;\n  title: string;\n};\n\ntype StatusLoading = {\n  status: 'loading';\n  time: number;\n};\n\ntype StatusError = {\n  status: 'error';\n  error: string;\n};\n\ntype StatusProps = StatusSuccess | StatusLoading | StatusError;\n\nexport const Status = (status: StatusProps) => {...\n")),(0,r.kt)("h3",{id:"component-types"},"Component Types"),(0,r.kt)("h4",{id:"container"},"Container"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'All container components have postfix "Container" or "Page" ',(0,r.kt)("inlineCode",{parentName:"li"},"[ComponentName]Container|Page"),'. Use "Page" postfix to indicate component it\'s an actual web page.'),(0,r.kt)("li",{parentName:"ul"},"Each feature has a container component (",(0,r.kt)("inlineCode",{parentName:"li"},"AddUserContainer.tsx"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"EditProductContainer.tsx"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"ProductsPage.tsx")," etc.)"),(0,r.kt)("li",{parentName:"ul"},"Includes business logic."),(0,r.kt)("li",{parentName:"ul"},"API integration."),(0,r.kt)("li",{parentName:"ul"},"Structure:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"ProductsPage/\n\u251c\u2500 api/\n\u2502  \u2514\u2500 useGetProducts/\n\u251c\u2500 components/\n\u2502  \u2514\u2500 ProductItem/\n\u251c\u2500 utils/\n\u2502  \u2514\u2500 filterProductsByType/\n\u2514\u2500 index.tsx\n")))),(0,r.kt)("h4",{id:"ui---feature"},"UI - Feature"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Representational components that are designed to fulfill feature requirements."),(0,r.kt)("li",{parentName:"ul"},"Nested inside container component folder."),(0,r.kt)("li",{parentName:"ul"},"Should follow ",(0,r.kt)("a",{parentName:"li",href:"#functions"},"functions conventions")," as much as possible."),(0,r.kt)("li",{parentName:"ul"},"No API integration."),(0,r.kt)("li",{parentName:"ul"},"Structure:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"ProductItem/\n\u251c\u2500 index.tsx\n\u251c\u2500 ProductItem.stories.tsx\n\u2514\u2500 ProductItem.test.tsx\n")))),(0,r.kt)("h4",{id:"ui---design-system"},"UI - Design system"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Global Reusable/shared components used throughout whole codebase."),(0,r.kt)("li",{parentName:"ul"},"Structure:",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"Button/\n\u251c\u2500 index.tsx\n\u251c\u2500 Button.stories.tsx\n\u2514\u2500 Button.test.tsx\n")))),(0,r.kt)("h3",{id:"store--pass-data"},"Store & Pass Data"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Utilize storing state in the URL, especially for filtering, sorting etc."),(0,r.kt)("li",{parentName:"ul"},"Don't sync URL state with local state."),(0,r.kt)("li",{parentName:"ul"},"Prop drilling should not become an issue, if it does ",(0,r.kt)("a",{parentName:"li",href:"https://kentcdodds.com/blog/prop-drilling#how-can-we-avoid-problems-with-prop-drilling"},"break out your render method"),"."),(0,r.kt)("li",{parentName:"ul"},"Consider passing data simply through props, using the URL, or composing children. Use global state (Zustand, Context) as a last resort."),(0,r.kt)("li",{parentName:"ul"},"Use component composition sparingly, where its emphasized how component API improved (performance improvement, better app scalability etc.)."),(0,r.kt)("li",{parentName:"ul"},"UI components should show derived state and send events, nothing more."),(0,r.kt)("li",{parentName:"ul"},"Data fetching is only allowed in container components."),(0,r.kt)("li",{parentName:"ul"},"Use of server-state library is encouraged (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/tanstack/query"},"react-query"),", ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/apollographql/apollo-client"},"apollo client"),"...)."),(0,r.kt)("li",{parentName:"ul"},"use of client-state library for global state is discouraged.",(0,r.kt)("br",{parentName:"li"}),"Reconsider if something should be truly global across application, e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"themeMode"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"Permissions")," or even that can be put in server-state (e.g. user settings - ",(0,r.kt)("inlineCode",{parentName:"li"},"/me")," endpoint). If still truly needed use ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/pmndrs/zustand"},"Zustand")," or Context (not Redux, Mobx etc.).")),(0,r.kt)("h2",{id:"source-organization"},"Source Organization"),(0,r.kt)("h3",{id:"code-collocation"},"Code Collocation"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Every application or package in monorepo has project files/folders organized and grouped by ",(0,r.kt)("strong",{parentName:"li"},"feature"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Collocate code as close as possible to where it's relevant.")),(0,r.kt)("li",{parentName:"ul"},"Deep folder nesting should not represent an issue.")),(0,r.kt)("h3",{id:"imports"},"Imports"),(0,r.kt)("p",null,"Import paths can be relative, starting with ",(0,r.kt)("inlineCode",{parentName:"p"},"./")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"../"),", or they can be absolute ",(0,r.kt)("inlineCode",{parentName:"p"},"common/components"),"."),(0,r.kt)("p",null,"Relative imports ",(0,r.kt)("inlineCode",{parentName:"p"},"./myCustomHook")," must be used when importing files within the same feature, as it allows moving feature around the codebase without introducing changes in these imports.",(0,r.kt)("br",{parentName:"p"}),"\n","Absolute imports ",(0,r.kt)("inlineCode",{parentName:"p"},"common/components")," must be used in all other cases."),(0,r.kt)("h3",{id:"project-structure"},"Project Structure"),(0,r.kt)("p",null,"Example frontend monorepo project, where every application has following file/folder structure:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"apps/\n\u251c\u2500 product-manager/\n\u2502  \u251c\u2500 common/\n\u2502  \u2502  \u251c\u2500 components/\n\u2502  \u2502  \u2502  \u251c\u2500 Button/\n\u2502  \u2502  \u2502  \u251c\u2500 ProductTitle/\n\u2502  \u2502  \u2502  \u251c\u2500 ...\n\u2502  \u2502  \u2502  \u2514\u2500 index.tsx\n\u2502  \u2502  \u251c\u2500 consts/\n\u2502  \u2502  \u2502  \u251c\u2500 paths.ts\n\u2502  \u2502  \u2502  \u2514\u2500 ...\n\u2502  \u2502  \u251c\u2500 hooks/\n\u2502  \u2502  \u2514\u2500 types/\n\u2502  \u251c\u2500 modules/\n\u2502  \u2502  \u251c\u2500 HomePage/\n\u2502  \u2502  \u251c\u2500 ProductAddPage/\n\u2502  \u2502  \u251c\u2500 ProductPage/\n\u2502  \u2502  \u251c\u2500 ProductsPage/\n\u2502  \u2502  \u2502  \u251c\u2500 api/\n\u2502  \u2502  \u2502  \u2502  \u2514\u2500 useGetProducts/\n\u2502  \u2502  \u2502  \u251c\u2500 components/\n\u2502  \u2502  \u2502  \u2502  \u251c\u2500 ProductItem/\n\u2502  \u2502  \u2502  \u2502  \u251c\u2500 ProductsStatistics/\n\u2502  \u2502  \u2502  \u2502  \u2514\u2500 ...\n\u2502  \u2502  \u2502  \u251c\u2500 utils/\n\u2502  \u2502  \u2502  \u2502  \u2514\u2500 filterProductsByType/\n\u2502  \u2502  \u2502  \u2514\u2500 index.tsx\n\u2502  \u2502  \u251c\u2500 ...\n\u2502  \u2502  \u2514\u2500 index.tsx\n\u2502  \u251c\u2500 eslintrc.js\n\u2502  \u251c\u2500 package.json\n\u2502  \u2514\u2500 tsconfig.json\n\u251c\u2500 warehouse/\n\u251c\u2500 admin-dashboard/\n\u2514\u2500 ...\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"modules")," folder is responsible for implementation of each individual page, where all custom features for that page are being implemented (components, hooks, utils functions etc.)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"common"),' folder is responsible for implementations that are truly used across application. Since its a "global folder" it should be used sparingly.',(0,r.kt)("br",{parentName:"li"}),"If same component e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"common/components/ProductTitle")," starts being used on more the one page, it shall be moved to common folder.")),(0,r.kt)("p",null,"In case Nextjs is being used as React framework, ",(0,r.kt)("inlineCode",{parentName:"p"},"pages")," folder serves only as a router, where its responsibility is to define routes (no business logic implementation). Same approach applies for other frameworks with file-system based router."),(0,r.kt)("h2",{id:"tests---unit--integration"},"Tests - Unit & Integration"),(0,r.kt)("h3",{id:"what--how-to-test"},"What & How To Test"),(0,r.kt)("p",null,"Automated test comes with benefits that helps us write better code and makes it easy to refactor, while bugs are caught earlier in the process.",(0,r.kt)("br",{parentName:"p"}),"\n","Consider trade-offs of what and how to test to achieve confidence application is working as intended, while writing and maintaining tests doesn't slow the team down."),(0,r.kt)("p",null,"\u2705 Do:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Design test to be short, simple, and delightful to work with. One should look at a test and get the intent instantly."),(0,r.kt)("li",{parentName:"ul"},"Strive to write tests in a way your app/package is used by a user, meaning test business logic.",(0,r.kt)("br",{parentName:"li"}),"E.g. given some user input, they receive the expected output for a process."),(0,r.kt)("li",{parentName:"ul"},"All tests must be setup and implemented to run as standalone in isolation, where they don't depend on other tests order of execution."),(0,r.kt)("li",{parentName:"ul"},"Make tests resilient to changes, query HTML elements based on attributes that are unlikely to change.",(0,r.kt)("br",{parentName:"li"}),"Order of priority must be followed as specified in ",(0,r.kt)("a",{parentName:"li",href:"https://testing-library.com/docs/queries/about/#priority"},"Testing Library")," - ",(0,r.kt)("a",{parentName:"li",href:"https://testing-library.com/docs/queries/byrole"},"role"),", ",(0,r.kt)("a",{parentName:"li",href:"https://testing-library.com/docs/queries/bylabeltext"},"label"),", ",(0,r.kt)("a",{parentName:"li",href:"https://testing-library.com/docs/queries/byplaceholdertext"},"placeholder"),", ",(0,r.kt)("a",{parentName:"li",href:"https://testing-library.com/docs/queries/bytext"},"text contents"),", ",(0,r.kt)("a",{parentName:"li",href:"https://testing-library.com/docs/queries/bydisplayvalue"},"display value"),", ",(0,r.kt)("a",{parentName:"li",href:"https://testing-library.com/docs/queries/byalttext"},"alt text"),", ",(0,r.kt)("a",{parentName:"li",href:"https://testing-library.com/docs/queries/bytitle"},"title"),", ",(0,r.kt)("a",{parentName:"li",href:"https://testing-library.com/docs/queries/bytestid"},"test ID"),".")),(0,r.kt)("p",null,"\u274c Don't:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Don't test implementation details. When refactoring code, tests shouldn't change.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Don't re-test the library/framework.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Don't mandate 100% code coverage for applications.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Don't test just to test."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'// \u274c Avoid\nit("should render user list", () => {\n  render(<UserList />);\n  expect(screen.getByText("Users List")).toBeInTheDocument();\n});\n')))),(0,r.kt)("h3",{id:"test-description"},"Test Description"),(0,r.kt)("p",null,"All test descriptions must follow naming convention as ",(0,r.kt)("inlineCode",{parentName:"p"},"it('should ... when ...')"),".",(0,r.kt)("br",{parentName:"p"}),"\n","",(0,r.kt)("a",{parentName:"p",href:"https://github.com/jest-community/eslint-plugin-jest/blob/main/docs/rules/valid-title.md#mustmatch--mustnotmatch"},"Eslint rule")," implements regex:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"'jest/valid-title': [\n  'error',\n  {\n    mustMatch: { it: [/should.*when/u.source, \"Test title must include 'should' and 'when'\"] },\n  },\n],\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'// \u274c Avoid\nit("accepts ISO date format where date is parsed and formatted as YYYY-MM");\nit("after title is confirmed user description is rendered");\n\n// \u2705 Name test description as it(\'should ... when ...\')\nit("should return parsed date as YYYY-MM when input is in ISO date format");\nit("should render user description when title is confirmed");\n')),(0,r.kt)("h3",{id:"tooling-extension"},"Tooling Extension"),(0,r.kt)("p",null,"Test can be run through npm scripts, but to improve development experience it's highly encouraged to use ",(0,r.kt)("a",{parentName:"p",href:"https://marketplace.visualstudio.com/items?itemName=firsttris.vscode-jest-runner"},"Jest Runner")," VS code extension so any single test can be run ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/mkosir/typescript-style-guide/raw/main/misc/vscode-jest-runner.gif"},"instantly"),", especially if testing app/package in larger codebase (monorepo)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"code --install-extension firsttris.vscode-jest-runner\n")),(0,r.kt)("h3",{id:"snapshot"},"Snapshot"),(0,r.kt)("p",null,'Snapshot tests are discouraged in order to avoid fragility, which leads to "just update it" turn of mind, to achieve all the tests pass.',(0,r.kt)("br",{parentName:"p"}),"\n","Exceptions can be made, with strong rational behind it, where test output has short and clear intent, whats actually being tested (e.g. design system library critical elements that shouldn't deviate)."))}k.isMDXComponent=!0}}]);